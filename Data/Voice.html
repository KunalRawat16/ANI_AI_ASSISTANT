<!DOCTYPE html>
<html>
<head>
    <title>Background Speech Recognition</title>
    <script>
        let recognition;
        let lastResult = "";
        
        function startRecognition() {
            recognition = new (window.webkitSpeechRecognition || window.SpeechRecognition)();
            recognition.lang = 'en';
            recognition.continuous = true;
            recognition.interimResults = false;

            recognition.onresult = function(event) {
                const transcript = event.results[event.results.length - 1][0].transcript;
                document.getElementById('output').textContent = transcript;
                lastResult = transcript;
            };

            recognition.onerror = function(event) {
                console.error("Recognition error:", event.error);
            };

            recognition.start();
        }

        function getLastResult() {
            return lastResult;
        }
    </script>
</head>
<body>
    <div id="output" style="display:none;"></div>
    <script>startRecognition();</script>
</body>
</html>